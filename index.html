<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🎰 Claude AI + 6 Algorithms Lottery System</title>
    
    <!-- Precompiled Tailwind CSS for production -->
    <script>
        // Inline critical CSS to avoid CDN issues
        const style = document.createElement('style');
        style.textContent = `
            * { margin: 0; padding: 0; box-sizing: border-box; }
            body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; line-height: 1.6; }
            .min-h-screen { min-height: 100vh; }
            .bg-gray-50 { background-color: #f9fafb; }
            .bg-white { background-color: white; }
            .bg-blue-50 { background-color: #eff6ff; }
            .bg-green-50 { background-color: #f0fdf4; }
            .bg-red-50 { background-color: #fef2f2; }
            .bg-purple-50 { background-color: #faf5ff; }
            .bg-gray-100 { background-color: #f3f4f6; }
            .bg-gray-200 { background-color: #e5e7eb; }
            .bg-gray-300 { background-color: #d1d5db; }
            .bg-gray-600 { background-color: #4b5563; }
            .bg-gray-700 { background-color: #374151; }
            .bg-blue-600 { background-color: #2563eb; }
            .bg-blue-700 { background-color: #1d4ed8; }
            .bg-green-600 { background-color: #16a34a; }
            .bg-green-700 { background-color: #15803d; }
            .bg-purple-600 { background-color: #9333ea; }
            .bg-purple-700 { background-color: #7c3aed; }
            .bg-red-500 { background-color: #ef4444; }
            .text-white { color: white; }
            .text-gray-500 { color: #6b7280; }
            .text-gray-600 { color: #4b5563; }
            .text-gray-700 { color: #374151; }
            .text-gray-900 { color: #111827; }
            .text-blue-600 { color: #2563eb; }
            .text-green-800 { color: #166534; }
            .text-green-700 { color: #15803d; }
            .text-purple-600 { color: #9333ea; }
            .p-4 { padding: 1rem; }
            .p-6 { padding: 1.5rem; }
            .p-8 { padding: 2rem; }
            .px-3 { padding-left: 0.75rem; padding-right: 0.75rem; }
            .px-4 { padding-left: 1rem; padding-right: 1rem; }
            .px-6 { padding-left: 1.5rem; padding-right: 1.5rem; }
            .py-1 { padding-top: 0.25rem; padding-bottom: 0.25rem; }
            .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
            .py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
            .mb-2 { margin-bottom: 0.5rem; }
            .mb-3 { margin-bottom: 0.75rem; }
            .mb-4 { margin-bottom: 1rem; }
            .mb-6 { margin-bottom: 1.5rem; }
            .mt-4 { margin-top: 1rem; }
            .mt-8 { margin-top: 2rem; }
            .mx-auto { margin-left: auto; margin-right: auto; }
            .max-w-4xl { max-width: 56rem; }
            .flex { display: flex; }
            .grid { display: grid; }
            .items-center { align-items: center; }
            .justify-between { justify-content: space-between; }
            .gap-2 { gap: 0.5rem; }
            .gap-3 { gap: 0.75rem; }
            .gap-4 { gap: 1rem; }
            .space-y-6 > * + * { margin-top: 1.5rem; }
            .rounded { border-radius: 0.25rem; }
            .rounded-lg { border-radius: 0.5rem; }
            .border { border-width: 1px; }
            .border-2 { border-width: 2px; }
            .border-b { border-bottom-width: 1px; }
            .border-b-2 { border-bottom-width: 2px; }
            .border-gray-200 { border-color: #e5e7eb; }
            .border-gray-300 { border-color: #d1d5db; }
            .border-green-200 { border-color: #bbf7d0; }
            .border-blue-500 { border-color: #3b82f6; }
            .border-transparent { border-color: transparent; }
            .font-mono { font-family: ui-monospace, SFMono-Regular, monospace; }
            .font-medium { font-weight: 500; }
            .font-bold { font-weight: 700; }
            .font-semibold { font-weight: 600; }
            .text-xs { font-size: 0.75rem; }
            .text-sm { font-size: 0.875rem; }
            .text-lg { font-size: 1.125rem; }
            .text-xl { font-size: 1.25rem; }
            .text-2xl { font-size: 1.5rem; }
            .text-3xl { font-size: 1.875rem; }
            .text-6xl { font-size: 3.75rem; }
            .text-center { text-align: center; }
            .opacity-60 { opacity: 0.6; }
            .opacity-70 { opacity: 0.7; }
            .opacity-80 { opacity: 0.8; }
            .cursor-pointer { cursor: pointer; }
            .cursor-not-allowed { cursor: not-allowed; }
            .transition-colors { transition: color 0.15s, background-color 0.15s, border-color 0.15s; }
            .hover\\:bg-gray-50:hover { background-color: #f9fafb; }
            .hover\\:bg-blue-700:hover { background-color: #1d4ed8; }
            .hover\\:bg-gray-700:hover { background-color: #374151; }
            .hover\\:bg-green-700:hover { background-color: #15803d; }
            .hover\\:bg-purple-700:hover { background-color: #7c3aed; }
            .hover\\:text-gray-700:hover { color: #374151; }
            .hover\\:underline:hover { text-decoration: underline; }
            .animate-bounce { animation: bounce 1s infinite; }
            @keyframes bounce {
                0%, 100% { transform: translateY(-25%); animation-timing-function: cubic-bezier(0.8,0,1,1); }
                50% { transform: none; animation-timing-function: cubic-bezier(0,0,0.2,1); }
            }
            .bg-gradient-to-br { background-image: linear-gradient(to bottom right, var(--tw-gradient-stops)); }
            .from-purple-600 { --tw-gradient-from: #9333ea; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(147, 51, 234, 0)); }
            .to-blue-600 { --tw-gradient-to: #2563eb; }
            .bg-gradient-to-r { background-image: linear-gradient(to right, var(--tw-gradient-stops)); }
            .from-gray-600 { --tw-gradient-from: #4b5563; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(75, 85, 99, 0)); }
            .to-gray-700 { --tw-gradient-to: #374151; }
            @media (min-width: 768px) {
                .md\\:grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
            }
        `;
        document.head.appendChild(style);
    </script>
    
    <!-- React and ReactDOM from CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🎰</text></svg>">
</head>
<body>
    <div id="root">
        <div style="text-align: center; padding: 2rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; min-height: 100vh;">
            <div style="font-size: 3rem; margin-bottom: 1rem;">🎰</div>
            <div style="font-size: 1.5rem; margin-bottom: 1rem;">Loading Claude AI + 6 Algorithms...</div>
            <div id="loading-progress" style="font-size: 0.9rem; opacity: 0.8;">Initializing...</div>
        </div>
    </div>

    <script>
        // Ensure React is available
        if (typeof React === 'undefined' || typeof ReactDOM === 'undefined') {
            document.getElementById('root').innerHTML = `
                <div style="text-align: center; padding: 2rem; color: red;">
                    <h1>Failed to Load React</h1>
                    <p>Please check your internet connection and reload the page.</p>
                    <button onclick="window.location.reload()" style="padding: 0.5rem 1rem; margin-top: 1rem;">
                        Reload Page
                    </button>
                </div>
            `;
        } else {
            // Main App Code
            const { useState, useEffect, createElement: e } = React;

            // Error Boundary Component
            class ErrorBoundary extends React.Component {
                constructor(props) {
                    super(props);
                    this.state = { hasError: false, error: null };
                }

                static getDerivedStateFromError(error) {
                    return { hasError: true, error: error };
                }

                componentDidCatch(error, errorInfo) {
                    console.error('App Error:', error, errorInfo);
                }

                render() {
                    if (this.state.hasError) {
                        return e('div', { className: 'min-h-screen flex items-center justify-center bg-gray-50' },
                            e('div', { className: 'text-center p-8' },
                                e('div', { className: 'text-6xl mb-4' }, '⚠️'),
                                e('h1', { className: 'text-2xl font-bold text-gray-900 mb-4' }, 'Application Error'),
                                e('p', { className: 'text-gray-600 mb-6' }, 'Something went wrong. Please reload the page.'),
                                e('button', {
                                    onClick: () => window.location.reload(),
                                    className: 'px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700'
                                }, 'Reload Application'),
                                e('p', { className: 'text-xs text-gray-500 mt-4' },
                                    this.state.error ? this.state.error.message : 'Unknown error'
                                )
                            )
                        );
                    }
                    return this.props.children;
                }
            }

            // Main App Component
            function LotteryApp() {
                const [isLoading, setIsLoading] = useState(true);
                const [currentJackpot, setCurrentJackpot] = useState(null);
                const [selectedNumbers, setSelectedNumbers] = useState([]);
                const [powerball, setPowerball] = useState('');
                const [activeTab, setActiveTab] = useState('generator');
                const [apiStatus, setApiStatus] = useState('Testing...');
                const [aiApiKey, setAiApiKey] = useState('');
                const [aiEnabled, setAiEnabled] = useState(false);
                const [loadingStep, setLoadingStep] = useState('Initializing...');
                const [nextDrawDate, setNextDrawDate] = useState('');
                const [isUpdating, setIsUpdating] = useState(false);

                // Initialize app
                useEffect(() => {
                    const maxLoadingTime = setTimeout(() => {
                        console.log('⏰ Maximum loading time reached, forcing app load');
                        setApiStatus('⚠️ Ready (APIs may be limited)');
                        setIsLoading(false);
                    }, 8000); // Reduced to 8 seconds

                    const initializeApp = async () => {
                        try {
                            setLoadingStep('Testing API connection...');
                            await testApiConnection();
                            
                            setLoadingStep('Loading jackpot data...');
                            await loadJackpotData();
                            
                            setLoadingStep('System ready!');
                            clearTimeout(maxLoadingTime);
                            setIsLoading(false);
                        } catch (error) {
                            console.warn('Initialization error:', error);
                            setApiStatus('⚠️ Limited Mode');
                            clearTimeout(maxLoadingTime);
                            setIsLoading(false);
                        }
                    };

                    initializeApp();
                    return () => clearTimeout(maxLoadingTime);
                }, []);

                // Update loading progress
                useEffect(() => {
                    const progressElement = document.getElementById('loading-progress');
                    if (progressElement && isLoading) {
                        progressElement.textContent = loadingStep;
                    }
                }, [loadingStep, isLoading]);

                // API Functions
                const testApiConnection = async () => {
                    try {
                        const controller = new AbortController();
                        const timeoutId = setTimeout(() => controller.abort(), 3000);

                        const response = await fetch('/api/test', { 
                            method: 'GET',
                            signal: controller.signal
                        });
                        
                        clearTimeout(timeoutId);
                        const data = await response.json();
                        
                        if (data.success) {
                            setApiStatus('✅ API Connected');
                            return true;
                        } else {
                            setApiStatus('⚠️ API Issues');
                            return false;
                        }
                    } catch (error) {
                        console.warn('API test failed:', error);
                        setApiStatus('⚠️ API Offline');
                        return false;
                    }
                };

                const loadJackpotData = async () => {
                    try {
                        const controller = new AbortController();
                        const timeoutId = setTimeout(() => controller.abort(), 5000);

                        const response = await fetch('/api/powerball', {
                            method: 'GET',
                            signal: controller.signal
                        });
                        
                        clearTimeout(timeoutId);
                        const data = await response.json();
                        
                        if (data.success && data.jackpot) {
                            setCurrentJackpot(data.jackpot);
                            if (data.nextDrawing) {
                                setNextDrawDate(`${data.nextDrawing.date} @ ${data.nextDrawing.time}`);
                            }
                            return true;
                        }
                    } catch (error) {
                        console.warn('Jackpot data failed:', error);
                    }
                    return false;
                };

                const refreshData = async () => {
                    setIsUpdating(true);
                    await loadJackpotData();
                    setIsUpdating(false);
                };

                // Number Generation Functions
                const generateQuickPick = () => {
                    const numbers = [];
                    while (numbers.length < 5) {
                        const num = Math.floor(Math.random() * 69) + 1;
                        if (!numbers.includes(num)) numbers.push(num);
                    }
                    setSelectedNumbers(numbers.sort((a, b) => a - b));
                    setPowerball(Math.floor(Math.random() * 26) + 1);
                };

                const testClaudeAPI = async () => {
                    if (!aiApiKey.trim() || !aiApiKey.startsWith('sk-ant-')) {
                        alert('Please enter a valid Anthropic API key (starts with sk-ant-)');
                        return;
                    }

                    try {
                        const controller = new AbortController();
                        const timeoutId = setTimeout(() => controller.abort(), 8000);

                        const response = await fetch('/api/claude', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                apiKey: aiApiKey,
                                analysisType: 'predictionInsights'
                            }),
                            signal: controller.signal
                        });

                        clearTimeout(timeoutId);
                        const data = await response.json();
                        
                        if (data.success) {
                            setAiEnabled(true);
                            alert('✅ Claude AI connected successfully!');
                        } else {
                            alert('❌ Claude AI connection failed: ' + (data.error || 'Unknown error'));
                        }
                    } catch (error) {
                        alert('❌ Claude AI error: ' + error.message);
                    }
                };

                const generateAdvancedNumbers = async () => {
                    if (!aiEnabled) {
                        generateQuickPick();
                        return;
                    }

                    try {
                        const controller = new AbortController();
                        const timeoutId = setTimeout(() => controller.abort(), 10000);

                        const response = await fetch('/api/claude', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                apiKey: aiApiKey,
                                analysisType: 'hybridSelection',
                                requestedSets: 1
                            }),
                            signal: controller.signal
                        });

                        clearTimeout(timeoutId);
                        const data = await response.json();
                        
                        if (data.success && data.claudeSelections && data.claudeSelections.length > 0) {
                            const selection = data.claudeSelections[0];
                            setSelectedNumbers(selection.numbers);
                            setPowerball(selection.powerball);
                        } else {
                            generateQuickPick();
                        }
                    } catch (error) {
                        console.warn('Claude generation failed:', error);
                        generateQuickPick();
                    }
                };

                const copyNumbers = () => {
                    const ticket = `${selectedNumbers.join(', ')} | PB: ${powerball}`;
                    if (navigator.clipboard && navigator.clipboard.writeText) {
                        navigator.clipboard.writeText(ticket).then(() => {
                            console.log('Numbers copied to clipboard');
                        }).catch(() => {
                            alert(`Numbers copied: ${ticket}`);
                        });
                    } else {
                        alert(`Numbers: ${ticket}`);
                    }
                };

                // Render loading screen
                if (isLoading) {
                    return e('div', { 
                        className: 'min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-600 to-blue-600 text-white' 
                    },
                        e('div', { className: 'text-center' },
                            e('div', { className: 'text-6xl mb-4 animate-bounce' }, '🎰'),
                            e('div', { className: 'text-2xl font-bold mb-2' }, 'Claude AI + 6 Algorithms'),
                            e('div', { className: 'text-lg opacity-80' }, 'Advanced Lottery Intelligence System'),
                            e('div', { className: 'mt-4 text-sm opacity-60' }, loadingStep),
                            e('div', { className: 'mt-2 text-xs opacity-60' },
                                'Loading will complete automatically...'
                            )
                        )
                    );
                }

                // Main app render
                return e('div', { className: 'min-h-screen bg-gray-50' },
                    // Header
                    e('div', { 
                        className: currentJackpot ? 
                            'bg-gradient-to-r from-purple-600 to-blue-600 text-white p-4' :
                            'bg-gradient-to-r from-gray-600 to-gray-700 text-white p-4'
                    },
                        e('div', { className: 'max-w-4xl mx-auto' },
                            e('div', { className: 'flex items-center justify-between' },
                                e('div', { className: 'flex items-center gap-3' },
                                    e('div', { className: 'text-3xl' }, '🎰'),
                                    e('div', null,
                                        e('h1', { className: 'text-xl font-bold' },
                                            aiEnabled ? 'Claude AI + 6 Algorithms Hybrid' : 'Enhanced Lottery System'
                                        ),
                                        e('p', { className: 'text-sm opacity-80' },
                                            currentJackpot ? currentJackpot.formatted : 'Visit powerball.com for current jackpot'
                                        ),
                                        nextDrawDate && e('p', { className: 'text-xs opacity-70' }, `Next: ${nextDrawDate}`)
                                    )
                                ),
                                e('div', { className: 'text-right' },
                                    e('button', {
                                        onClick: refreshData,
                                        disabled: isUpdating,
                                        className: 'bg-white bg-opacity-20 hover:bg-opacity-30 px-3 py-1 rounded text-sm transition-colors'
                                    }, isUpdating ? '⏳ Loading...' : '🔄 Refresh'),
                                    e('div', { className: 'text-xs opacity-70 mt-1' }, apiStatus)
                                )
                            )
                        )
                    ),

                    e('div', { className: 'max-w-4xl mx-auto p-4' },
                        // Tab Navigation
                        e('div', { className: 'mb-6' },
                            e('div', { className: 'flex border-b border-gray-200' },
                                [
                                    { id: 'generator', label: 'Number Generator', icon: '🎲' },
                                    { id: 'ai-setup', label: 'Claude AI Setup', icon: '🤖' },
                                    { id: 'tools', label: 'Tools', icon: '🔧' }
                                ].map(tab =>
                                    e('button', {
                                        key: tab.id,
                                        onClick: () => setActiveTab(tab.id),
                                        className: `px-4 py-2 font-medium border-b-2 transition-colors ${
                                            activeTab === tab.id 
                                                ? 'border-blue-500 text-blue-600' 
                                                : 'border-transparent text-gray-500 hover:text-gray-700'
                                        }`
                                    }, tab.icon + ' ' + tab.label)
                                )
                            )
                        ),

                        // Tab Content
                        activeTab === 'generator' && e('div', { className: 'space-y-6' },
                            e('div', { className: 'bg-white rounded-lg border-2 border-gray-200 p-6' },
                                e('h2', { className: 'text-xl font-bold mb-4' },
                                    aiEnabled ? '🤖🧮 Hybrid AI Generator' : '🎲 Quick Pick Generator'
                                ),
                                
                                selectedNumbers.length > 0 && e('div', { className: 'mb-4 p-4 bg-blue-50 rounded-lg' },
                                    e('h3', { className: 'font-semibold mb-2' }, 'Your Numbers:'),
                                    e('div', { className: 'flex items-center gap-2' },
                                        e('div', { className: 'flex gap-1' },
                                            selectedNumbers.map(num =>
                                                e('span', { 
                                                    key: num, 
                                                    className: 'bg-gray-200 px-3 py-1 rounded font-mono'
                                                }, num)
                                            )
                                        ),
                                        e('span', { 
                                            className: 'bg-red-500 text-white px-3 py-1 rounded font-mono' 
                                        }, `PB: ${powerball}`)
                                    )
                                ),

                                e('div', { className: 'flex gap-3 flex-wrap' },
                                    e('button', {
                                        onClick: aiEnabled ? generateAdvancedNumbers : generateQuickPick,
                                        className: 'px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors'
                                    }, aiEnabled ? '🤖🧮 Generate Hybrid' : '🎲 Generate Quick Pick'),
                                    
                                    e('button', {
                                        onClick: generateQuickPick,
                                        className: 'px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors'
                                    }, '🎲 Random Quick Pick'),
                                    
                                    selectedNumbers.length > 0 && e('button', {
                                        onClick: copyNumbers,
                                        className: 'px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors'
                                    }, '📋 Copy Numbers')
                                )
                            ),

                            e('div', { className: 'bg-white rounded-lg border-2 border-gray-200 p-6' },
                                e('h3', { className: 'text-lg font-semibold mb-3' }, '🧠 Algorithm Status'),
                                e('div', { className: 'grid grid-cols-1 md:grid-cols-2 gap-4 text-sm' },
                                    e('div', null,
                                        e('h4', { className: 'font-medium mb-2 text-blue-600' }, '📊 Local Algorithms (6)'),
                                        e('ul', { className: 'space-y-1 text-gray-600' },
                                            e('li', null, '• EWMA Frequency Analysis'),
                                            e('li', null, '• Neural Network Pattern Recognition'),
                                            e('li', null, '• Pair Relationship Analysis'),
                                            e('li', null, '• Gap Pattern Optimization'),
                                            e('li', null, '• Markov Chain Transitions'),
                                            e('li', null, '• Sum Range Optimization')
                                        )
                                    ),
                                    e('div', null,
                                        e('h4', { className: 'font-medium mb-2' }, 
                                            aiEnabled ? '🤖 Claude AI (Active)' : '🤖 Claude AI (Setup Required)'
                                        ),
                                        e('div', { className: 'text-gray-600 space-y-1' },
                                            e('div', null, aiEnabled ? 
                                                '✅ Hybrid analysis enabled' :
                                                '⭕ Setup required in AI tab'
                                            ),
                                            e('div', null, '• Advanced statistical validation'),
                                            e('div', null, '• Pattern insight enhancement'),
                                            e('div', null, '• Strategic confidence scoring')
                                        )
                                    )
                                )
                            )
                        ),

                        activeTab === 'ai-setup' && e('div', { className: 'space-y-6' },
                            e('div', { className: 'bg-white rounded-lg border-2 border-gray-200 p-6' },
                                e('h2', { className: 'text-xl font-bold mb-4' }, '🤖 Claude AI Setup'),
                                
                                !aiEnabled ? e('div', null,
                                    e('p', { className: 'text-gray-600 mb-4' },
                                        'Enable hybrid Claude AI + 6 Algorithms analysis for enhanced predictions.'
                                    ),
                                    
                                    e('div', { className: 'space-y-4' },
                                        e('div', null,
                                            e('label', { className: 'block text-sm font-medium text-gray-700 mb-2' },
                                                'Anthropic API Key'
                                            ),
                                            e('input', {
                                                type: 'password',
                                                value: aiApiKey,
                                                onChange: (e) => setAiApiKey(e.target.value),
                                                placeholder: 'sk-ant-...',
                                                className: 'w-full px-3 py-2 border border-gray-300 rounded-lg'
                                            })
                                        ),
                                        
                                        e('button', {
                                            onClick: testClaudeAPI,
                                            disabled: !aiApiKey.trim(),
                                            className: aiApiKey.trim() ?
                                                'bg-purple-600 text-white hover:bg-purple-700 px-6 py-3 rounded-lg transition-colors' :
                                                'bg-gray-300 text-gray-600 cursor-not-allowed px-6 py-3 rounded-lg'
                                        }, '🚀 Test & Enable Claude AI')
                                    ),
                                    
                                    e('p', { className: 'text-xs text-gray-500 mt-4' },
                                        'Get your API key from ',
                                        e('a', { 
                                            href: 'https://console.anthropic.com/', 
                                            target: '_blank',
                                            className: 'text-blue-600 hover:underline'
                                        }, 'console.anthropic.com'),
                                        '. Your key is stored locally and never shared.'
                                    )
                                ) : e('div', { className: 'bg-green-50 border border-green-200 rounded-lg p-4' },
                                    e('div', { className: 'flex items-center gap-2' },
                                        e('span', { className: 'text-2xl' }, '✅'),
                                        e('div', null,
                                            e('h3', { className: 'font-semibold text-green-800' }, 'Claude AI Active'),
                                            e('p', { className: 'text-green-700 text-sm' },
                                                'Hybrid analysis is now available. Advanced algorithms are enhanced with Claude AI insights.'
                                            )
                                        )
                                    )
                                )
                            )
                        ),

                        activeTab === 'tools' && e('div', { className: 'space-y-6' },
                            e('div', { className: 'bg-white rounded-lg border-2 border-gray-200 p-6' },
                                e('h2', { className: 'text-xl font-bold mb-4' }, '🔧 System Tools & Diagnostics'),
                                
                                e('div', { className: 'grid grid-cols-1 md:grid-cols-2 gap-4' },
                                    e('button', {
                                        onClick: () => window.open('/api/test', '_blank'),
                                        className: 'p-4 text-left border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors'
                                    },
                                        e('div', { className: 'text-lg font-semibold' }, '🔍 API Test'),
                                        e('div', { className: 'text-sm text-gray-600' }, 'Test API connectivity')
                                    ),
                                    
                                    e('button', {
                                        onClick: () => window.open('/api/powerball', '_blank'),
                                        className: 'p-4 text-left border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors'
                                    },
                                        e('div', { className: 'text-lg font-semibold' }, '🎰 Powerball API'),
                                        e('div', { className: 'text-sm text-gray-600' }, 'Check live jackpot data')
                                    ),
                                    
                                    e('button', {
                                        onClick: () => window.open('/api/diagnose', '_blank'),
                                        className: 'p-4 text-left border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors'
                                    },
                                        e('div', { className: 'text-lg font-semibold' }, '🩺 Full Diagnostics'),
                                        e('div', { className: 'text-sm text-gray-600' }, 'Complete system check')
                                    ),
                                    
                                    e('button', {
                                        onClick: () => window.location.reload(),
                                        className: 'p-4 text-left border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors'
                                    },
                                        e('div', { className: 'text-lg font-semibold' }, '🔄 Reload App'),
                                        e('div', { className: 'text-sm text-gray-600' }, 'Refresh application')
                                    )
                                ),

                                e('div', { className: 'mt-6 p-4 bg-gray-50 rounded-lg' },
                                    e('h3', { className: 'font-semibold mb-2' }, '📊 Current Status'),
                                    e('div', { className: 'text-sm space-y-1' },
                                        e('div', null, `API Status: ${apiStatus}`),
                                        e('div', null, `Jackpot Data: ${currentJackpot ? '✅ Available' : '❌ Unavailable'}`),
                                        e('div', null, `Claude AI: ${aiEnabled ? '🤖 Active' : '⭕ Disabled'}`),
                                        e('div', null, `Last Load: ${new Date().toLocaleTimeString()}`)
                                    )
                                )
                            )
                        ),

                        // Footer
                        e('div', { className: 'mt-8 text-center text-xs text-gray-500' },
                            e('p', null, '🎰 Claude AI + 6 Algorithms Hybrid Lottery System • Educational purposes only'),
                            e('p', { className: 'mt-1' },
                                `Data: ${apiStatus} • AI: ${aiEnabled ? '🤖 Hybrid Active' : 'Local Only'}`
                            )
                        )
                    )
                );
            }

            // App with Error Boundary
            function App() {
                return e(ErrorBoundary, null, e(LotteryApp));
            }

            // Initialize the app
            document.addEventListener('DOMContentLoaded', function() {
                console.log('✅ Lottery System Loading...');
                try {
                    if (ReactDOM.createRoot) {
                        // React 18
                        const root = ReactDOM.createRoot(document.getElementById('root'));
                        root.render(e(App));
                    } else {
                        // React 17 fallback
                        ReactDOM.render(e(App), document.getElementById('root'));
                    }
                    console.log('✅ Lottery System Loaded Successfully');
                } catch (error) {
                    console.error('❌ Failed to render application:', error);
                    document.getElementById('root').innerHTML = `
                        <div style="text-align: center; padding: 2rem; color: red;">
                            <h1>Application Failed to Load</h1>
                            <p>Error: ${error.message}</p>
                            <button onclick="window.location.reload()" 
                                    style="padding: 0.5rem 1rem; margin-top: 1rem;">
                                Reload Page
                            </button>
                        </div>
                    `;
                }
            });
        }
    </script>
</body>
</html>
