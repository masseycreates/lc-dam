<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Lottery Intelligence System</title>

    <style>
        /* Advanced Lottery Intelligence System - Inline Styles */

        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background-color: #f8fafc;
            color: #1f2937;
            line-height: 1.6;
        }

        /* Lottery App Main Container */
        .lottery-app {
            min-height: 100vh;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        }

        /* Header Styles */
        .app-header {
            background: white;
            border-bottom: 1px solid #e5e7eb;
            padding: 1.5rem 2rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .app-header h1 {
            font-size: 2rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 0.5rem;
        }

        .current-jackpot {
            font-size: 1.125rem;
            color: #059669;
            font-weight: 600;
        }

        /* Tab Navigation */
        .tab-navigation {
            background: white;
            border-bottom: 1px solid #e5e7eb;
            padding: 0 2rem;
            display: flex;
            gap: 0;
            overflow-x: auto;
        }

        .tab-navigation button {
            padding: 1rem 1.5rem;
            border: none;
            background: transparent;
            color: #6b7280;
            font-weight: 500;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.2s ease;
            white-space: nowrap;
        }

        .tab-navigation button:hover {
            color: #3b82f6;
            background: #f8fafc;
        }

        .tab-navigation button.active {
            color: #3b82f6;
            border-bottom-color: #3b82f6;
            background: #f8fafc;
        }

        /* Main Content Area */
        .app-content {
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Generator Tab Styles */
        .generator-tab h2 {
            font-size: 1.5rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 1.5rem;
        }

        .algorithm-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            margin-bottom: 2rem;
        }

        .algorithm-buttons button {
            padding: 0.75rem 1.5rem;
            border: 1px solid #d1d5db;
            background: white;
            color: #374151;
            border-radius: 0.5rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .algorithm-buttons button:hover {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(59, 130, 246, 0.3);
        }

        /* Generated Sets Container */
        .generated-sets-container h3 {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 1rem;
        }

        .generated-sets {
            display: grid;
            gap: 1rem;
        }

        .generated-set {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: all 0.2s ease;
        }

        .generated-set:hover {
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transform: translateY(-1px);
        }

        .set-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .algorithm-name {
            font-weight: 600;
            color: #3b82f6;
            text-transform: capitalize;
        }

        .confidence {
            font-size: 0.875rem;
            color: #6b7280;
            background: #f3f4f6;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
        }

        .numbers {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .number {
            background: #3b82f6;
            color: white;
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.875rem;
        }

        .powerball {
            background: #dc2626;
            color: white;
            padding: 0.5rem 0.75rem;
            border-radius: 1rem;
            font-weight: 600;
            font-size: 0.875rem;
        }

        .set-description {
            color: #6b7280;
            font-size: 0.875rem;
            margin-bottom: 1rem;
        }

        .set-actions {
            display: flex;
            gap: 0.5rem;
        }

        .set-actions button {
            padding: 0.5rem 1rem;
            border: 1px solid #d1d5db;
            background: white;
            color: #374151;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .set-actions button:hover {
            background: #f3f4f6;
            border-color: #9ca3af;
        }

        /* Manual Selection Tab */
        .manual-tab h2 {
            font-size: 1.5rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 1.5rem;
        }

        .selection-controls {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .selection-controls button {
            padding: 0.75rem 1.5rem;
            border: 1px solid #d1d5db;
            background: white;
            color: #374151;
            border-radius: 0.5rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .selection-controls button:hover:not(:disabled) {
            background: #f3f4f6;
            border-color: #9ca3af;
        }

        .selection-controls button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .selected-display {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .selected-display h3 {
            font-size: 1.125rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 0.75rem;
        }

        .selected-numbers {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .selected-number {
            background: #3b82f6;
            color: white;
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        .number-grids {
            display: grid;
            gap: 2rem;
        }

        .main-numbers h3,
        .powerball-numbers h3 {
            font-size: 1.125rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 1rem;
        }

        .number-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(3rem, 1fr));
            gap: 0.5rem;
            max-width: 100%;
        }

        .powerball-grid {
            max-width: 600px;
        }

        .number-btn {
            width: 3rem;
            height: 3rem;
            border: 1px solid #d1d5db;
            background: white;
            color: #374151;
            border-radius: 50%;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .number-btn:hover {
            background: #f3f4f6;
            border-color: #9ca3af;
        }

        .number-btn.selected {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }

        .number-btn.powerball.selected {
            background: #dc2626;
            border-color: #dc2626;
        }

        /* User Selections */
        .user-selections {
            display: grid;
            gap: 1rem;
        }

        .user-selection {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .selection-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .selection-name {
            font-weight: 600;
            color: #1f2937;
        }

        .selection-date {
            font-size: 0.875rem;
            color: #6b7280;
        }

        .selection-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .selection-actions button {
            padding: 0.5rem 1rem;
            border: 1px solid #d1d5db;
            background: white;
            color: #374151;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .selection-actions button:hover {
            background: #f3f4f6;
            border-color: #9ca3af;
        }

        /* Analysis Tab */
        .analysis-tab h2 {
            font-size: 1.5rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 1.5rem;
        }

        .analysis-section {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .analysis-section h4 {
            font-size: 1.125rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 1rem;
        }

        /* Settings Tab */
        .settings-tab h2 {
            font-size: 1.5rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 1.5rem;
        }

        .setting-group {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }

        .setting-group label {
            display: block;
            font-weight: 600;
            color: #374151;
            margin-bottom: 0.5rem;
        }

        .setting-group input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            font-size: 1rem;
            transition: border-color 0.2s ease;
        }

        .setting-group input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .setting-group small {
            display: block;
            color: #6b7280;
            font-size: 0.875rem;
            margin-top: 0.5rem;
        }

        /* Error Message */
        .error-message {
            background: #fef2f2;
            border: 1px solid #fecaca;
            color: #991b1b;
            padding: 1rem;
            border-radius: 0.5rem;
            margin: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .error-message button {
            background: none;
            border: none;
            color: #991b1b;
            font-size: 1.25rem;
            cursor: pointer;
            padding: 0;
            width: 1.5rem;
            height: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Loading States */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 50vh;
            font-size: 1.125rem;
            color: #6b7280;
        }

        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .loading-spinner {
            background: white;
            padding: 2rem;
            border-radius: 0.75rem;
            font-weight: 600;
            color: #374151;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .app-header {
                padding: 1rem;
            }

            .app-content {
                padding: 1rem;
            }

            .tab-navigation {
                padding: 0 1rem;
            }

            .algorithm-buttons {
                flex-direction: column;
            }

            .algorithm-buttons button {
                width: 100%;
            }

            .selection-controls {
                flex-direction: column;
            }

            .selection-controls button {
                width: 100%;
            }

            .number-grid {
                grid-template-columns: repeat(7, 1fr);
            }

            .powerball-grid {
                grid-template-columns: repeat(6, 1fr);
            }
        }

        @media (max-width: 480px) {
            .app-header h1 {
                font-size: 1.5rem;
            }

            .current-jackpot {
                font-size: 1rem;
            }

            .number-grid {
                grid-template-columns: repeat(5, 1fr);
            }

            .powerball-grid {
                grid-template-columns: repeat(4, 1fr);
            }

            .number-btn {
                width: 2.5rem;
                height: 2.5rem;
                font-size: 0.875rem;
            }
        }
    </style>

    <!-- React and Babel -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Load utility modules first -->
    <script src="src/utils/constants.js"></script>
    <script src="src/utils/helpers.js"></script>
    <script src="src/utils/LotteryAlgorithms.js"></script>

    <!-- Load services -->
    <script src="src/services/apiService.js"></script>
    <script src="src/services/lotteryService.js"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback, useMemo } = React;

        // Main Application Component
        const LotteryApp = () => {
            // State management
            const [currentDrawing, setCurrentDrawing] = useState(null);
            const [historicalData, setHistoricalData] = useState(null);
            const [generatedSets, setGeneratedSets] = useState([]);
            const [userSelections, setUserSelections] = useState([]);
            const [selectedNumbers, setSelectedNumbers] = useState([]);
            const [selectedPowerball, setSelectedPowerball] = useState(null);
            const [claudeApiKey, setClaudeApiKey] = useState('');
            const [analysis, setAnalysis] = useState(null);
            const [loading, setLoading] = useState(false);
            const [error, setError] = useState(null);
            const [activeTab, setActiveTab] = useState('generator');

            // Initialize the application
            useEffect(() => {
                const initializeApp = async () => {
                    setLoading(true);
                    try {
                        // Wait for services to be available
                        if (!window.lotteryService) {
                            throw new Error('Lottery service not available');
                        }

                        // Initialize lottery service
                        const result = await window.lotteryService.initialize();
                        if (result.success) {
                            // Load initial data
                            setCurrentDrawing(window.lotteryService.getCurrentDrawing());
                            setHistoricalData(window.lotteryService.getHistoricalData());
                            setGeneratedSets(window.lotteryService.getGeneratedSets());
                            setUserSelections(window.lotteryService.getUserSelections());
                        }

                        // Load saved API key
                        const savedApiKey = window.loadFromStorage ?
                            window.loadFromStorage(window.LOTTERY_CONFIG.STORAGE_KEYS.API_KEY) : null;
                        if (savedApiKey) {
                            setClaudeApiKey(savedApiKey);
                        }
                    } catch (err) {
                        setError('Failed to initialize application');
                        console.error('Initialization error:', err);
                    } finally {
                        setLoading(false);
                    }
                };

                // Add a small delay to ensure all scripts are loaded
                setTimeout(initializeApp, 100);
            }, []);

            // Generate numbers using selected algorithm
            const generateNumbers = useCallback(async (algorithm = 'hybrid', count = 5) => {
                console.log(`Generating numbers with algorithm: ${algorithm}, count: ${count}`);
                setLoading(true);
                setError(null);

                try {
                    if (!window.lotteryService) {
                        throw new Error('Lottery service not available');
                    }

                    console.log('Calling lotteryService.generateNumbers...');
                    const result = await window.lotteryService.generateNumbers(algorithm, count);
                    console.log('Generation result:', result);

                    if (result.success) {
                        const newGeneratedSets = window.lotteryService.getGeneratedSets();
                        console.log('New generated sets:', newGeneratedSets);
                        setGeneratedSets(newGeneratedSets);
                    } else {
                        console.log('Generation failed:', result.error);
                        setError(`Failed to generate numbers: ${result.error}`);
                    }
                } catch (err) {
                    console.error('Generation error:', err);
                    setError(`Error generating numbers: ${err.message}`);
                } finally {
                    setLoading(false);
                }
            }, []);

            // Save user selection
            const saveSelection = useCallback(() => {
                if (selectedNumbers.length !== 5 || !selectedPowerball) {
                    setError('Please select 5 numbers and 1 Powerball');
                    return;
                }

                if (!window.lotteryService) {
                    setError('Lottery service not available');
                    return;
                }

                const result = window.lotteryService.saveUserSelection(
                    selectedNumbers,
                    selectedPowerball
                );

                if (result.success) {
                    setUserSelections(window.lotteryService.getUserSelections());
                    setSelectedNumbers([]);
                    setSelectedPowerball(null);
                    setError(null);
                } else {
                    setError(result.error);
                }
            }, [selectedNumbers, selectedPowerball]);

            // Analyze numbers
            const analyzeNumbers = useCallback(async (numbers, powerball) => {
                setLoading(true);
                setError(null);

                try {
                    if (!window.lotteryService) {
                        throw new Error('Lottery service not available');
                    }

                    const result = await window.lotteryService.analyzeNumbers(numbers, powerball);
                    if (result.success) {
                        setAnalysis(result.data);
                    } else {
                        setError(result.error);
                    }
                } catch (err) {
                    setError('Failed to analyze numbers');
                    console.error('Analysis error:', err);
                } finally {
                    setLoading(false);
                }
            }, []);

            // Get Claude analysis
            const getClaudeAnalysis = useCallback(async (prompt) => {
                if (!claudeApiKey) {
                    setError('Please enter your Claude API key');
                    return;
                }

                setLoading(true);
                setError(null);
                
                try {
                    const result = await window.apiService.getClaudeAnalysis(prompt, claudeApiKey);
                    if (result.success) {
                        return result.data;
                    } else {
                        setError(result.error);
                        return null;
                    }
                } catch (err) {
                    setError('Failed to get Claude analysis');
                    console.error('Claude analysis error:', err);
                    return null;
                } finally {
                    setLoading(false);
                }
            }, [claudeApiKey]);

            // Save API key
            const saveApiKey = useCallback(() => {
                if (claudeApiKey) {
                    window.saveToStorage(window.LOTTERY_CONFIG.STORAGE_KEYS.API_KEY, claudeApiKey);
                }
            }, [claudeApiKey]);

            // Number selection handlers
            const toggleNumber = useCallback((number) => {
                setSelectedNumbers(prev => {
                    if (prev.includes(number)) {
                        return prev.filter(n => n !== number);
                    } else if (prev.length < 5) {
                        return [...prev, number].sort((a, b) => a - b);
                    }
                    return prev;
                });
            }, []);

            const selectPowerball = useCallback((powerball) => {
                setSelectedPowerball(powerball);
            }, []);

            // Quick pick
            const quickPick = useCallback(() => {
                const numbers = window.generateRandomNumbers(1, 69, 5);
                const powerball = Math.floor(Math.random() * 26) + 1;
                setSelectedNumbers(numbers);
                setSelectedPowerball(powerball);
            }, []);

            // Render number grid
            const renderNumberGrid = (min, max, selected, onSelect, className = '') => {
                const numbers = [];
                for (let i = min; i <= max; i++) {
                    numbers.push(
                        <button
                            key={i}
                            className={`number-btn ${selected.includes ? selected.includes(i) ? 'selected' : '' : selected === i ? 'selected' : ''} ${className}`}
                            onClick={() => onSelect(i)}
                        >
                            {i}
                        </button>
                    );
                }
                return numbers;
            };

            // Render generated sets
            const renderGeneratedSets = () => {
                return generatedSets.map((set, index) => (
                    <div key={set.id || index} className="generated-set">
                        <div className="set-header">
                            <span className="algorithm-name">{set.algorithm}</span>
                            <span className="confidence">
                                Confidence: {window.formatPercentage(set.confidence)}
                            </span>
                        </div>
                        <div className="numbers">
                            {set.numbers.map(num => (
                                <span key={num} className="number">{num}</span>
                            ))}
                            <span className="powerball">PB: {set.powerball}</span>
                        </div>
                        <div className="set-description">{set.description}</div>
                        <div className="set-actions">
                            <button onClick={() => analyzeNumbers(set.numbers, set.powerball)}>
                                Analyze
                            </button>
                            <button onClick={() => {
                                setSelectedNumbers(set.numbers);
                                setSelectedPowerball(set.powerball);
                            }}>
                                Use These Numbers
                            </button>
                        </div>
                    </div>
                ));
            };

            // Render user selections
            const renderUserSelections = () => {
                return userSelections.map((selection, index) => (
                    <div key={selection.id || index} className="user-selection">
                        <div className="selection-header">
                            <span className="selection-name">{selection.name}</span>
                            <span className="selection-date">
                                {window.formatDate(new Date(selection.timestamp))}
                            </span>
                        </div>
                        <div className="numbers">
                            {selection.numbers.map(num => (
                                <span key={num} className="number">{num}</span>
                            ))}
                            <span className="powerball">PB: {selection.powerball}</span>
                        </div>
                        <div className="selection-actions">
                            <button onClick={() => analyzeNumbers(selection.numbers, selection.powerball)}>
                                Analyze
                            </button>
                            <button onClick={() => window.lotteryService.deleteUserSelection(selection.id)}>
                                Delete
                            </button>
                        </div>
                    </div>
                ));
            };

            // Render analysis results
            const renderAnalysis = () => {
                if (!analysis) return null;

                return (
                    <div className="analysis-results">
                        <h3>Number Analysis</h3>
                        <div className="analysis-section">
                            <h4>Selected Numbers</h4>
                            <div className="numbers">
                                {analysis.numbers.map(num => (
                                    <span key={num} className="number">{num}</span>
                                ))}
                                <span className="powerball">PB: {analysis.powerball}</span>
                            </div>
                        </div>
                        
                        {analysis.frequency && (
                            <div className="analysis-section">
                                <h4>Frequency Analysis</h4>
                                <div className="frequency-data">
                                    {analysis.frequency.numbers.map(item => (
                                        <div key={item.number} className="freq-item">
                                            <span>Number {item.number}</span>
                                            <span>Frequency: {item.frequency}</span>
                                            <span>Percentile: {window.formatPercentage(item.percentile / 100)}</span>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}

                        {analysis.patterns && (
                            <div className="analysis-section">
                                <h4>Pattern Analysis</h4>
                                <div className="pattern-data">
                                    <div>Sum: {analysis.patterns.sum}</div>
                                    <div>Range: {analysis.patterns.range}</div>
                                    <div>Even/Odd: {analysis.patterns.evenOdd.ratio}</div>
                                    {analysis.patterns.consecutive.length > 0 && (
                                        <div>Consecutive: {analysis.patterns.consecutive.map(seq => seq.join('-')).join(', ')}</div>
                                    )}
                                </div>
                            </div>
                        )}

                        {analysis.recommendations && analysis.recommendations.length > 0 && (
                            <div className="analysis-section">
                                <h4>Recommendations</h4>
                                <div className="recommendations">
                                    {analysis.recommendations.map((rec, index) => (
                                        <div key={index} className={`recommendation ${rec.type}`}>
                                            {rec.message}
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}
                    </div>
                );
            };

            if (loading && !currentDrawing) {
                return <div className="loading">Loading...</div>;
            }

            return (
                <div className="lottery-app">
                    <header className="app-header">
                        <h1>Advanced Lottery Intelligence System</h1>
                        {currentDrawing && (
                            <div className="current-jackpot">
                                Next Jackpot: {window.formatCurrency(currentDrawing.jackpot || 0)}
                            </div>
                        )}
                    </header>

                    {error && (
                        <div className="error-message">
                            {error}
                            <button onClick={() => setError(null)}>Ã—</button>
                        </div>
                    )}

                    <nav className="tab-navigation">
                        <button 
                            className={activeTab === 'generator' ? 'active' : ''}
                            onClick={() => setActiveTab('generator')}
                        >
                            Number Generator
                        </button>
                        <button 
                            className={activeTab === 'manual' ? 'active' : ''}
                            onClick={() => setActiveTab('manual')}
                        >
                            Manual Selection
                        </button>
                        <button 
                            className={activeTab === 'analysis' ? 'active' : ''}
                            onClick={() => setActiveTab('analysis')}
                        >
                            Analysis
                        </button>
                        <button 
                            className={activeTab === 'history' ? 'active' : ''}
                            onClick={() => setActiveTab('history')}
                        >
                            My Selections
                        </button>
                        <button 
                            className={activeTab === 'settings' ? 'active' : ''}
                            onClick={() => setActiveTab('settings')}
                        >
                            Settings
                        </button>
                    </nav>

                    <main className="app-content">
                        {activeTab === 'generator' && (
                            <div className="generator-tab">
                                <div className="generator-controls">
                                    <h2>AI Number Generator</h2>
                                    <div className="algorithm-buttons">
                                        <button onClick={() => generateNumbers('frequency')}>
                                            Frequency Analysis
                                        </button>
                                        <button onClick={() => generateNumbers('hot_cold')}>
                                            Hot & Cold Numbers
                                        </button>
                                        <button onClick={() => generateNumbers('pattern')}>
                                            Pattern Analysis
                                        </button>
                                        <button onClick={() => generateNumbers('statistical')}>
                                            Statistical
                                        </button>
                                        <button onClick={() => generateNumbers('hybrid')}>
                                            Hybrid (Recommended)
                                        </button>
                                        <button onClick={() => generateNumbers('random')}>
                                            Random
                                        </button>
                                    </div>
                                </div>
                                
                                <div className="generated-sets-container">
                                    <h3>Generated Number Sets</h3>
                                    {generatedSets.length === 0 ? (
                                        <p>No generated sets yet. Click an algorithm button above to generate numbers.</p>
                                    ) : (
                                        <div className="generated-sets">
                                            {renderGeneratedSets()}
                                        </div>
                                    )}
                                </div>
                            </div>
                        )}

                        {activeTab === 'manual' && (
                            <div className="manual-tab">
                                <h2>Manual Number Selection</h2>
                                
                                <div className="selection-controls">
                                    <button onClick={quickPick}>Quick Pick</button>
                                    <button onClick={() => setSelectedNumbers([])}>Clear Numbers</button>
                                    <button onClick={() => setSelectedPowerball(null)}>Clear Powerball</button>
                                    <button 
                                        onClick={saveSelection}
                                        disabled={selectedNumbers.length !== 5 || !selectedPowerball}
                                    >
                                        Save Selection
                                    </button>
                                </div>

                                <div className="number-selection">
                                    <div className="selected-display">
                                        <h3>Selected Numbers ({selectedNumbers.length}/5)</h3>
                                        <div className="selected-numbers">
                                            {selectedNumbers.map(num => (
                                                <span key={num} className="selected-number">{num}</span>
                                            ))}
                                        </div>
                                        <h3>Powerball: {selectedPowerball || 'None'}</h3>
                                    </div>

                                    <div className="number-grids">
                                        <div className="main-numbers">
                                            <h3>Select 5 Numbers (1-69)</h3>
                                            <div className="number-grid">
                                                {renderNumberGrid(1, 69, selectedNumbers, toggleNumber)}
                                            </div>
                                        </div>

                                        <div className="powerball-numbers">
                                            <h3>Select Powerball (1-26)</h3>
                                            <div className="number-grid powerball-grid">
                                                {renderNumberGrid(1, 26, [selectedPowerball], selectPowerball, 'powerball')}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {activeTab === 'analysis' && (
                            <div className="analysis-tab">
                                <h2>Number Analysis</h2>
                                {renderAnalysis()}
                            </div>
                        )}

                        {activeTab === 'history' && (
                            <div className="history-tab">
                                <h2>My Selections</h2>
                                {userSelections.length === 0 ? (
                                    <p>No saved selections yet.</p>
                                ) : (
                                    <div className="user-selections">
                                        {renderUserSelections()}
                                    </div>
                                )}
                            </div>
                        )}

                        {activeTab === 'settings' && (
                            <div className="settings-tab">
                                <h2>Settings</h2>
                                <div className="setting-group">
                                    <label htmlFor="claude-api-key">Claude API Key:</label>
                                    <input
                                        id="claude-api-key"
                                        type="password"
                                        value={claudeApiKey}
                                        onChange={(e) => setClaudeApiKey(e.target.value)}
                                        onBlur={saveApiKey}
                                        placeholder="Enter your Claude API key"
                                    />
                                    <small>Your API key is stored locally and never sent to our servers.</small>
                                </div>
                            </div>
                        )}
                    </main>

                    {loading && (
                        <div className="loading-overlay">
                            <div className="loading-spinner">Loading...</div>
                        </div>
                    )}
                </div>
            );
        };

        // Render the application using React 18 createRoot
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<LotteryApp />);
    </script>
</body>
</html>