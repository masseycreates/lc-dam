<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Lottery Intelligence System - Claude Opus 4 + 6 Algorithms Hybrid</title>
    <meta name="description" content="Advanced lottery number prediction system using Claude Opus 4 AI and 6 statistical algorithms for Powerball analysis">
    <meta name="keywords" content="lottery, powerball, AI, Claude Opus 4, number prediction, statistical analysis">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üé∞</text></svg>">
    
    <!-- Styles -->
    <link rel="stylesheet" href="src/styles/main.css">
    
    <!-- React and Babel for JSX transformation -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Performance and Analytics -->
    <script>
        // Performance monitoring
        window.performanceMetrics = {
            startTime: performance.now(),
            apiCalls: 0,
            errors: 0,
            loadTimes: {}
        };
        
        // Global error handler
        window.addEventListener('error', function(e) {
            window.performanceMetrics.errors++;
            console.error('Global error:', e.error);
        });
        
        // Performance tracking function
        window.trackPerformance = function(operation, startTime) {
            const duration = performance.now() - startTime;
            if (!window.performanceMetrics.loadTimes[operation]) {
                window.performanceMetrics.loadTimes[operation] = [];
            }
            window.performanceMetrics.loadTimes[operation].push(duration);
        };
        
        // System performance metrics
        window.getSystemPerformanceMetrics = function() {
            return {
                ...window.performanceMetrics,
                totalLoadTime: performance.now() - window.performanceMetrics.startTime,
                memoryUsage: performance.memory ? {
                    used: Math.round(performance.memory.usedJSHeapSize / 1024 / 1024),
                    total: Math.round(performance.memory.totalJSHeapSize / 1024 / 1024),
                    limit: Math.round(performance.memory.jsHeapSizeLimit / 1024 / 1024)
                } : null
            };
        };
    </script>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #8b5cf6 0%, #3b82f6 30%, #10b981 60%, #f59e0b 100%);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        color: white;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        z-index: 9999;
        transition: opacity 0.5s ease;
    ">
        <div style="text-align: center;">
            <div style="font-size: 4rem; margin-bottom: 1rem;">üé∞</div>
            <h1 style="font-size: 2rem; font-weight: bold; margin-bottom: 0.5rem;">
                Advanced Lottery Intelligence System
            </h1>
            <p style="font-size: 1.2rem; opacity: 0.9; margin-bottom: 2rem;">
                Claude Opus 4 + 6 Algorithms Hybrid
            </p>
            <div style="
                width: 40px;
                height: 40px;
                border: 4px solid rgba(255,255,255,0.3);
                border-top: 4px solid white;
                border-radius: 50%;
                animation: spin 1s linear infinite;
                margin: 0 auto;
            "></div>
        </div>
    </div>

    <!-- Main Application Container -->
    <div id="app-root"></div>

    <!-- Error Boundary Fallback -->
    <div id="error-fallback" style="display: none; padding: 2rem; text-align: center;">
        <div style="max-width: 600px; margin: 0 auto;">
            <h2 style="color: #dc2626; margin-bottom: 1rem;">‚ö†Ô∏è Application Error</h2>
            <p style="margin-bottom: 1rem;">
                The lottery system encountered an unexpected error. Please refresh the page to try again.
            </p>
            <button onclick="window.location.reload()" style="
                background: #3b82f6;
                color: white;
                border: none;
                padding: 0.5rem 1rem;
                border-radius: 0.375rem;
                cursor: pointer;
                font-weight: 600;
            ">
                üîÑ Refresh Page
            </button>
        </div>
    </div>

    <!-- Module Scripts -->
    <script type="text/babel" data-type="module">
        // Import all modules
        import AdvancedLotterySystem from './src/components/App.js';
        
        // Error Boundary Component
        class ErrorBoundary extends React.Component {
            constructor(props) {
                super(props);
                this.state = { hasError: false, error: null };
            }

            static getDerivedStateFromError(error) {
                return { hasError: true, error };
            }

            componentDidCatch(error, errorInfo) {
                console.error('Error Boundary caught an error:', error, errorInfo);
                window.performanceMetrics.errors++;
                
                // Show fallback UI
                document.getElementById('error-fallback').style.display = 'block';
                document.getElementById('app-root').style.display = 'none';
            }

            render() {
                if (this.state.hasError) {
                    return React.createElement('div', {
                        style: {
                            padding: '2rem',
                            textAlign: 'center',
                            maxWidth: '600px',
                            margin: '2rem auto'
                        }
                    },
                        React.createElement('h2', {
                            style: { color: '#dc2626', marginBottom: '1rem' }
                        }, '‚ö†Ô∏è Something went wrong'),
                        React.createElement('p', {
                            style: { marginBottom: '1rem', color: '#6b7280' }
                        }, 'The application encountered an error. Please refresh the page.'),
                        React.createElement('button', {
                            onClick: () => window.location.reload(),
                            style: {
                                background: '#3b82f6',
                                color: 'white',
                                border: 'none',
                                padding: '0.5rem 1rem',
                                borderRadius: '0.375rem',
                                cursor: 'pointer',
                                fontWeight: '600'
                            }
                        }, 'üîÑ Refresh Page')
                    );
                }

                return this.props.children;
            }
        }

        // Initialize Application
        function initializeApp() {
            const startTime = performance.now();
            
            try {
                // Hide loading screen
                const loadingScreen = document.getElementById('loading-screen');
                if (loadingScreen) {
                    loadingScreen.style.opacity = '0';
                    setTimeout(() => {
                        loadingScreen.style.display = 'none';
                    }, 500);
                }

                // Render the main application
                const root = ReactDOM.createRoot(document.getElementById('app-root'));
                root.render(
                    React.createElement(ErrorBoundary, null,
                        React.createElement(AdvancedLotterySystem)
                    )
                );

                // Track initialization performance
                window.trackPerformance('appInitialization', startTime);
                
                console.log('üé∞ Advanced Lottery Intelligence System initialized successfully');
                console.log('üìä Performance metrics:', window.getSystemPerformanceMetrics());
                
            } catch (error) {
                console.error('Failed to initialize application:', error);
                window.performanceMetrics.errors++;
                
                // Show error fallback
                document.getElementById('error-fallback').style.display = 'block';
                document.getElementById('loading-screen').style.display = 'none';
            }
        }

        // Wait for DOM to be ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeApp);
        } else {
            initializeApp();
        }

        // Service Worker Registration (for future PWA capabilities)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                // Service worker registration would go here
                console.log('Service Worker support detected');
            });
        }
    </script>

    <!-- Inline styles for loading animation -->
    <style>
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>

    <!-- Analytics and Monitoring -->
    <script>
        // Basic analytics tracking
        window.addEventListener('load', () => {
            const loadTime = performance.now() - window.performanceMetrics.startTime;
            console.log(`üöÄ Application loaded in ${Math.round(loadTime)}ms`);
        });

        // Track user interactions
        document.addEventListener('click', (e) => {
            if (e.target.matches('button, .btn')) {
                console.log('Button clicked:', e.target.textContent?.trim());
            }
        });

        // Memory usage monitoring
        setInterval(() => {
            if (performance.memory) {
                const used = Math.round(performance.memory.usedJSHeapSize / 1024 / 1024);
                if (used > 100) { // Alert if memory usage exceeds 100MB
                    console.warn(`High memory usage detected: ${used}MB`);
                }
            }
        }, 30000); // Check every 30 seconds
    </script>
</body>
</html>